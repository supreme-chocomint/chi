var Minimalist={name:"minimalist",tablePageSize:5,init(){this.vaTable=document.querySelector(".minimalist.va-table"),this.vaTableBody=document.querySelector(".minimalist.va-table-body"),this.followTable=document.querySelector(".minimalist.follow-table"),this.followTableBody=document.querySelector(".minimalist.follow-table-body"),this.rolesTable=document.querySelector(".minimalist.roles-table"),this.rolesTableBody=document.querySelector(".minimalist.roles-table-body"),this.vaMainTable=document.querySelector(".minimalist.va-main-characters"),this.vaSupportTable=document.querySelector(".minimalist.va-support-characters"),this.vaPopularTableBody=document.querySelector(".minimalist.va-popular-characters-body"),this.vaUWTableBody=document.querySelector(".minimalist.va-uw-characters-body"),this.vaMainTableBody=document.querySelector(".minimalist.va-main-characters-body"),this.vaSupportTableBody=document.querySelector(".minimalist.va-support-characters-body"),this.searchTableBody=this.vaTableBody,this.characterBrowseTableBody=this.vaTableBody,this.vaLanguageTable=document.querySelector(".minimalist.va-language-table"),this.vaLanguageTableBody=document.querySelector(".minimalist.va-language-table-body")},activate(){let e=document.getElementById("va-bottom-container").children;for(let a of e)a.classList.add("one-half"),a.classList.add("column");let a=document.querySelectorAll(".static-display-top");for(let t of a)t.style.display=t.classList.contains("minimalist")?"":"none"},addFollowTableEntry(e){let a=document.createElement("tr"),t=document.createElement("td"),l=document.createElement("a"),i=document.createElement("td"),n=document.createElement("a"),r=document.createElement("td"),s=document.createElement("a");a.id=e.id,l.classList.add(e.id),window.clicked==e.id&&l.classList.add("clicked"),l.innerHTML=e.name,l.classList.add("clickable"),l.classList.add("internal_link"),l.onclick=function(){VADetailsOnClick(e.id)},n.innerHTML="Show All",n.classList.add("clickable"),n.classList.add("action_link"),n.onclick=function(){VAOnClick(e.id)},s.innerHTML=getDeleteIcon(),s.classList.add("clickable"),r.classList.add("symbol"),s.classList.add("symbol"),s.onclick=function(){unfollow(e)},t.appendChild(l),i.appendChild(n),r.appendChild(s),a.appendChild(t),a.appendChild(i),a.appendChild(r),this.followTableBody.appendChild(a)},clearFollowTable(){this.followTableBody.innerHTML=""},addNoResultsIndicator(e,a){let t=document.createElement("tr");this.appendNACells(t,2),this.getTableBody(e).appendChild(t),a&&(this.getTableBody(e).lastChild.firstChild.innerHTML+=" in selected entry/season")},appendNACells(e,a){for(let t,l=0;l<a;l++)t=document.createElement("td"),t.innerHTML="N/A",e.appendChild(t)},addVATableEntry(e){let a=document.createElement("tr"),t=document.createElement("td"),l=document.createElement("a"),i=document.createElement("td"),n=document.createElement("a"),r=document.createElement("td"),s=document.createElement("span"),d=document.createElement("td"),o=document.createElement("a");l.innerHTML=e.name,l.classList.add("clickable"),l.classList.add("internal_link"),l.onclick=function(){VADetailsOnClick(e.id)},t.appendChild(l),a.appendChild(t),n.innerHTML="Show All",n.classList.add("clickable"),n.classList.add("action_link"),n.onclick=function(){VAOnClick(e.id)},i.appendChild(n),a.appendChild(i),numRolesInt=window.seasonalRolesCounter[e.id],numRolesInt&&(s.innerHTML=numRolesInt,r.appendChild(s),a.appendChild(r)),o.innerHTML=isFollowed(e.id)?getBlackStar():getWhiteStar(),o.classList.add("clickable"),o.classList.add("symbol"),d.classList.add("symbol"),o.onclick=function(){o.innerHTML=toggleFollow(e)},l.classList.add(e.id),window.clicked==e.id&&l.classList.add("clicked"),d.appendChild(o),a.appendChild(d),a.classList.add(e.language),this.vaTableBody.appendChild(a)},styleVATable(){let e=this.vaTableBody.children.length,a=document.getElementById("va-table-head-link"),t=document.getElementById("va-table-head-roles"),l=document.getElementById("va-table-head-follow"),i=document.getElementById("va-table-head-extra1"),n=this.vaTable.getAttribute("data-state");0==e?(a.style.display="",t.style.display="none",l.style.display="none",l.style.display="none",i.style.display="none",addNoResultsIndicator("va-table-body")):"search"==n?(a.style.display="",t.style.display="none",l.style.display="",i.style.display="none"):(a.style.display="",t.style.display="",l.style.display="",i.style.display="none")},setVATableHeader(e){let a=document.getElementById("va-table-caption");a.setAttribute("data-content",e)},addRolesTableEntry(e){let a=document.createElement("tr"),t=document.createElement("td"),l=document.createElement("a"),i=document.createElement("td"),n=document.createElement("a");l.innerHTML=e.showName,l.href=e.showUrl,l.target="_blank",n.innerHTML=e.characterName,n.href=e.characterUrl,n.target="_blank",t.appendChild(l),i.appendChild(n),a.appendChild(t),a.appendChild(i),this.rolesTableBody.appendChild(a)},setRolesTableHeader(e){let a=document.getElementById("roles-table-caption");a.setAttribute("data-content",e)},addCharacterEntry(e,a,t,l,i){let n=a.character,r=a.show,s=this.getTableBody(e),d=document.createElement("tr"),o=document.createElement("td"),c=document.createElement("a"),y=document.createElement("span"),p=document.createElement("td"),m=document.createElement("a"),g=document.createElement("td"),h=document.createElement("span"),u=document.createElement("td"),b=document.createElement("span");if(t?(c.onclick=t,c.classList.add("clickable"),c.classList.add("action_link"),m.href=n.url,m.target="_blank",m.innerHTML="AniList"):(c.href=n.url,c.target="_blank",m.href=r.siteUrl,m.target="_blank",m.innerHTML=r.title.romaji),c.innerHTML=n.name,o.setAttribute("data-favourites",n.favourites),o.appendChild(c),d.appendChild(o),p.appendChild(m),d.appendChild(p),l){if(r&&r.seasonInt){let e=parsedSeasonInt(r.seasonInt);h.innerHTML=e,g.setAttribute("data-sortable-id",sortableSeasonId(e))}else h.innerHTML="N/A",g.setAttribute("data-sortable-id",0);g.appendChild(h),d.appendChild(g)}n.nameEmbellish&&(y.innerHTML=" "+n.nameEmbellish,o.appendChild(y)),s.appendChild(d)},getTableBody(e){return"va-table-body"===e?this.vaTableBody:"roles-table-body"===e?this.rolesTableBody:"va-popular-characters"===e?this.vaPopularTableBody:"va-uw-characters"===e?this.vaUWTableBody:"va-main-characters"===e?this.vaMainTableBody:"va-support-characters"===e?this.vaSupportTableBody:"media-search-table-body"===e?this.searchTableBody:"character-browse-table-body"===e?this.characterBrowseTableBody:"va-language-table-body"===e?this.vaLanguageTableBody:void 0},setSortOnClicks(){this.setSortOnClickForHeader(this.vaMainTable),this.setSortOnClickForHeader(this.vaSupportTable)},setSortOnClickForHeader(a){let t=a.querySelector("thead"),l=t.querySelector(".sort-fave"),i=t.querySelector(".sort-title"),n=t.querySelector(".sort-season"),r=this.sortTable,s=[l,i,n];for(let e of s)e.classList.add("clickable"),e.classList.remove("active-organization");l.classList.add("active-organization");let d={data:"favourites",order:"desc"};l.parentNode.setAttribute("data-order","desc"),l.onclick=function(t){r(t,d,a);for(let e of s)e.classList.remove("active-organization");l.classList.add("active-organization")};let o={};i.onclick=function(t){r(t,o,a);for(let e of s)e.classList.remove("active-organization");i.classList.add("active-organization")};let c={data:"sortable-id"};n.onclick=function(t){r(t,c,a);for(let e of s)e.classList.remove("active-organization");n.classList.add("active-organization")}},sortTable(a,e,t){let l,i,n,r=t.querySelector("thead"),s=r.querySelectorAll("th"),d=t.querySelector("tbody"),o=a.target;for(;"TH"!==o.nodeName;)o=o.parentNode;for(let l of s)l!=o&&l.setAttribute("data-order","");l=Array.prototype.indexOf.call(s,o),currentOrder=o.getAttribute("data-order"),""==currentOrder&&e.order?n=e.order:(i="asc"===currentOrder,n=i?"desc":"asc",e.order=n),o.setAttribute("data-order",n),e.selector="td:nth-child("+(l+1)+")",tinysort(d.querySelectorAll("tr"),e)},clearSideContainers(){this.vaPopularTableBody.innerHTML="",this.vaUWTableBody.innerHTML=""},clearBottomContainer(){this.vaMainTableBody.innerHTML="",this.vaSupportTableBody.innerHTML=""},resetFixedDimensions(){},addMediaSearchEntry(e){let a=document.createElement("tr"),t=document.createElement("td"),l=document.createElement("a"),i=document.createElement("td"),n=document.createElement("a");l.classList.add("clickable"),l.onclick=function(){unclick(),collectMediaRoles(e)},l.innerHTML=e.title.romaji,l.classList.add("action_link"),n.href=e.siteUrl,n.target="_blank",n.innerHTML="AniList",t.appendChild(l),a.appendChild(t),i.appendChild(n),a.appendChild(i),this.searchTableBody.appendChild(a)},setCharacterBrowseHeader(e){this.setVATableHeader(e)},styleMediaSearchTable(){0==this.searchTableBody.children.length&&addNoResultsIndicator("media-search-table-body"),document.getElementById("va-table-head-link").style.display="none",document.getElementById("va-table-head-roles").style.display="none",document.getElementById("va-table-head-follow").style.display="none",document.getElementById("va-table-head-extra1").style.display=""},styleCharacterBrowseTable(){0==this.characterBrowseTableBody.children.length&&addNoResultsIndicator("character-browse-table-body"),document.getElementById("va-table-head-link").style.display="none",document.getElementById("va-table-head-roles").style.display="none",document.getElementById("va-table-head-follow").style.display="none",document.getElementById("va-table-head-extra1").style.display=""},addVALanguageEntry(e){let a=document.createElement("tr"),t=document.createElement("td"),l=document.createElement("td"),i=document.createElement("td"),n=document.createElement("td"),r=document.createElement("a"),s=document.createElement("span"),d=document.createElement("a"),o=document.createElement("a");if(r.onclick=function(){VADetailsOnClick(e.id)},r.classList.add("clickable"),r.classList.add("internal_link"),r.innerHTML=parsedName(e.name),s.innerHTML="<br>"+e.language+"<br>",d.innerHTML="See Roles",d.classList.add("clickable"),d.classList.add("action_link"),d.onclick=function(){VAOnClick(e.id)},t.appendChild(r),t.appendChild(s),t.appendChild(d),a.appendChild(t),this.vaLanguageTableBody.appendChild(a),e.media){let t=e.media[0];o.href=t.siteUrl,o.target="_blank",o.innerHTML=t.title.romaji,n.appendChild(o),a.appendChild(n);for(let a of e.media.slice(1)){let e=document.createElement("tr"),t=document.createElement("td"),l=document.createElement("td"),i=document.createElement("a");i.href=a.siteUrl,i.target="_blank",i.innerHTML=a.title.romaji,l.appendChild(i),e.appendChild(t),e.appendChild(l),this.vaLanguageTableBody.appendChild(e)}}},setVaLanguageTableHeader(e){let a=document.getElementById("va-language-table-caption");a.setAttribute("data-content",e)},styleVaLanguageTable(e){let a=document.getElementById("va-language-table-head-entry");a.style.display=e?"":"none"},hideEntriesVaLanguageTable(){document.getElementById("va-language-table-head-entry").style.display="none"},showEntriesVaLanguageTable(){document.getElementById("va-language-table-head-entry").style.display=""}};function displayModeSwitchOnClick(){let e=window.location.href.split("#")[0],a=window.location.hash,t=e.split("?");switch(window.currentDisplay.name){case"grid":saveDisplayMode("minimalist");break;case"minimalist":saveDisplayMode("grid");}window.location.reload()}function buildDisplayModes(){let e=document.getElementById("display-mode-switch");for(let e of Object.values(window.displayModes))e.init();switch(window.currentDisplay.name){case"grid":e.value="Minimalist Mode";break;case"minimalist":e.value="Grid Mode";}window.currentDisplay.activate()}function setDisplayMode(){let e=fetchDisplayMode();switch(e){case"grid":window.currentDisplay=window.displayModes.grid;break;default:window.currentDisplay=window.displayModes.minimalist;}saveDisplayMode(window.currentDisplay.name)}function fetchDisplayMode(){try{let e=localStorage.getItem("display_mode");return e}catch(e){return"minimalist"}}function saveDisplayMode(e){try{localStorage.setItem("display_mode",e)}catch(e){}}var Grid={name:"grid",tablePageSize:6,init(){this.vaTable=document.querySelector(".grid.va-table"),this.vaTableBody=document.querySelector(".grid.va-table-body"),this.followTable=document.querySelector(".grid.follow-table"),this.followTableBody=document.querySelector(".grid.follow-table-body"),this.rolesTable=document.querySelector(".grid.roles-table"),this.rolesTableBody=document.querySelector(".grid.roles-table-body"),this.vaTableHeader=document.getElementById("va-table-header"),this.rolesTableHeader=document.getElementById("roles-table-header"),this.vaPopularTableBody=document.querySelector(".grid.va-popular-characters-body"),this.vaUWTableBody=document.querySelector(".grid.va-uw-characters-body"),this.vaMainTableBody=document.querySelector(".grid.va-main-characters-body"),this.vaSupportTableBody=document.querySelector(".grid.va-support-characters-body"),this.searchTableBody=this.vaTableBody,this.characterBrowseTableBody=this.vaTableBody,this.vaLanguageTable=document.querySelector(".grid.va-language-table"),this.vaLanguageTableBody=document.querySelector(".grid.va-language-table-body"),this.vaLanguageTableHeader=document.getElementById("va-language-table-header")},activate(){document.getElementById("va-left-container").classList.add("grid"),document.getElementById("va-right-container").classList.add("grid"),document.getElementById("va-bottom-container").classList.add("grid"),document.getElementById("left-col").classList.add("grid"),document.getElementById("right-col").classList.add("grid");let a=document.querySelectorAll(".static-display-top");for(let t of a)t.classList.contains("grid")&&(t.style.display="")},addFollowTableEntry(e){let a=document.createElement("div"),t=document.createElement("div"),l=document.createElement("p"),i=document.createElement("a"),n=document.createElement("a"),r=document.createElement("div"),s=document.createElement("span");a.id=e.id,t.style.backgroundImage=`url(${e.image})`,t.classList.add("thumbnail"),s.innerHTML=getDeleteIcon(),s.classList.add("thumbnail-icon"),r.onclick=function(){unfollow(e)},r.classList.add("delete-icon-wrapper"),r.appendChild(s),t.appendChild(r),a.appendChild(t),i.innerHTML=e.name,i.classList.add("clickable"),i.classList.add("internal_link"),i.onclick=function(){VADetailsOnClick(e.id)},l.appendChild(i),l.appendChild(document.createElement("br")),n.classList.add("clickable"),n.innerHTML+="Show Roles",n.classList.add("action_link"),n.onclick=function(){VAOnClick(e.id)},l.appendChild(n),l.appendChild(document.createElement("br")),l.classList.add("thumbnail-caption"),a.appendChild(l),a.classList.add("thumbnail-wrapper"),this.followTableBody.appendChild(a)},clearFollowTable(){this.followTableBody.innerHTML=""},addNoResultsIndicator(e,a){let t=document.createElement("p");t.classList.add("grid-table-message"),t.innerHTML="Nothing found :(","va-table-body"==e?this.vaTableBody.appendChild(t):"roles-table-body"==e?this.rolesTableBody.appendChild(t):"media-search-table-body"==e?this.searchTableBody.appendChild(t):"character-browse-table-body"==e?this.characterBrowseTableBody.appendChild(t):"va-language-table-body"==e&&(t.innerHTML+="<br>"+a,this.vaLanguageTableBody.appendChild(t))},addVATableEntry(e){let a=document.createElement("div"),t=document.createElement("div"),l=document.createElement("p"),i=document.createElement("a"),n=document.createElement("a"),r=document.createElement("div"),s=document.createElement("span");a.id=e.id,t.style.backgroundImage=`url(${e.image})`,t.classList.add("thumbnail"),s.innerHTML=isFollowed(e.id)?getBlackStar():getWhiteStar(),s.classList.add("thumbnail-icon"),r.onclick=function(){s.innerHTML=toggleFollow(e)},r.classList.add("follow-icon-wrapper"),r.appendChild(s),t.appendChild(r),a.appendChild(t),i.innerHTML=e.name,i.classList.add("clickable"),i.classList.add("internal_link"),i.onclick=function(){VADetailsOnClick(e.id)},l.appendChild(i),l.appendChild(document.createElement("br")),numRolesInt=window.seasonalRolesCounter[e.id],n.innerHTML=numRolesInt?`Roles: ${numRolesInt}`:"Show Roles",n.classList.add("clickable"),n.classList.add("action_link"),n.onclick=function(){VAOnClick(e.id)},l.appendChild(n),l.appendChild(document.createElement("br")),l.classList.add("thumbnail-caption"),a.classList.add("thumbnail-wrapper"),a.classList.add(e.language),a.appendChild(l),this.vaTableBody.appendChild(a)},styleVATable(e){let a,t=this.vaTableBody.children.length,l=this.tablePageSize-t%this.tablePageSize,i=Math.ceil((t-1)/this.tablePageSize),n=0,r=[];if(this.vaTableBody.style.height="",0==t)return void this.addNoResultsIndicator("va-table-body");if(!1!=e){for(let e of this.vaTableBody.children)e.clientHeight>n&&(n=e.clientHeight,a=e);for(let e=0;e<l+this.tablePageSize;e++)r.push(a.cloneNode(!0)),r[e].id=`clone${e}`,this.vaTableBody.appendChild(r[e]);this.vaTableBody.style.visibility="hidden",setNavigationState(this.vaTableBody,this.tablePageSize,"ALL"),switchToPage(i,"ALL"),this.vaTableBody.style.height=this.vaTableBody.clientHeight+"px",this.vaTableBody.style.visibility="",switchToPage(0,"ALL");for(let e of r)this.vaTableBody.removeChild(e)}},setVATableHeader(e){if(""==e)this.vaTable.style.display="none",this.vaTableHeader.innerHTML=e;else{this.vaTable.style.display="";let a=e.trim();a=a[0].toUpperCase()+a.slice(1),this.vaTableHeader.innerHTML=a}},addRolesTableEntry(e){let a={character:{name:e.characterName,image:e.characterImage.large,url:e.characterUrl},show:{title:{romaji:e.showName},siteUrl:e.showUrl}};addCharacterEntry("roles-table-body",a)},setRolesTableHeader(e){if(""==e)this.rolesTable.style.display="none",this.rolesTableHeader.innerHTML=e;else{this.rolesTable.style.display="";let a=e.trim();a=a[0].toUpperCase()+a.slice(1),this.rolesTableHeader.innerHTML=a}},addCharacterEntry(e,a,t,l){let i=a.character,n=a.show,r=this.getCharacterContainer(e),s=document.createElement("div"),d=document.createElement("div"),o=document.createElement("p"),c=document.createElement("a"),y=document.createElement("a"),p=document.createElement("span");if(d.style.backgroundImage=`url(${i.image})`,d.classList.add("thumbnail"),t&&(d.classList.add("clickable"),d.classList.add("action_link"),d.onclick=t),s.appendChild(d),c.href=i.url,c.target="_blank",c.innerHTML=i.name,o.appendChild(c),o.innerHTML+="<br>",n&&(o.innerHTML+="<i>from</i><br>",y.href=n.siteUrl,y.target="_blank",y.classList.add("title"),y.innerHTML=n.title.romaji,o.appendChild(y)),l){if(n&&n.seasonInt){let e=parsedSeasonInt(n.seasonInt);p.innerHTML=`<br>${e}`,p.setAttribute("data-sortable-id",sortableSeasonId(e))}else p.setAttribute("data-sortable-id",0);p.classList.add("season"),o.appendChild(p)}o.classList.add("thumbnail-caption"),s.appendChild(o),s.classList.add("thumbnail-wrapper"),s.setAttribute("data-favourites",i.favourites),r.appendChild(s)},getCharacterContainer(e){return"va-popular-characters"===e?this.vaPopularTableBody:"va-uw-characters"===e?this.vaUWTableBody:"va-main-characters"===e?this.vaMainTableBody:"va-support-characters"===e?this.vaSupportTableBody:"roles-table-body"===e?this.rolesTableBody:"character-browse-table-body"===e?this.characterBrowseTableBody:void 0},setSortOnClicks(){let e=document.getElementById("sort-cmain-title"),a=document.getElementById("sort-cmain-fave"),t=document.getElementById("sort-cmain-season");e.classList.add("clickable"),a.classList.add("clickable"),t.classList.add("clickable"),this.setSortOnClicksForTable(this.vaMainTableBody,e,a,t);let l=document.getElementById("sort-csupport-title"),i=document.getElementById("sort-csupport-fave"),n=document.getElementById("sort-csupport-season");l.classList.add("clickable"),i.classList.add("clickable"),n.classList.add("clickable"),this.setSortOnClicksForTable(this.vaSupportTableBody,l,i,n),a.classList.add("active-organization"),i.classList.add("active-organization"),e.classList.remove("active-organization"),t.classList.remove("active-organization"),l.classList.remove("active-organization"),n.classList.remove("active-organization"),this.vaMainTableBody.setAttribute("data-order","favourites"),this.vaSupportTableBody.setAttribute("data-order","favourites")},setSortOnClicksForTable(e,a,t,l){let i=[a,t,l];a.onclick=function(){let t;if("title"==e.getAttribute("data-order"))t=Array.prototype.slice.call(e.childNodes).reverse();else{t=tinysort(e.childNodes,".thumbnail-caption > .title");for(let e of i)e.classList.remove("active-organization");a.classList.add("active-organization")}e.setAttribute("data-order","title"),e.innerHTML="";for(let a of t)e.appendChild(a)},t.onclick=function(){let a;if("favourites"==e.getAttribute("data-order"))a=Array.prototype.slice.call(e.childNodes).reverse();else{a=tinysort(e.childNodes,{data:"favourites",order:"desc"});for(let e of i)e.classList.remove("active-organization");t.classList.add("active-organization")}e.setAttribute("data-order","favourites"),e.innerHTML="";for(let t of a)e.appendChild(t)},l.onclick=function(){let a;if("season"==e.getAttribute("data-order"))a=Array.prototype.slice.call(e.childNodes).reverse();else{a=tinysort(e.childNodes,{selector:".thumbnail-caption > .season",data:"sortable-id"});for(let e of i)e.classList.remove("active-organization");l.classList.add("active-organization")}e.setAttribute("data-order","season"),e.innerHTML="";for(let t of a)e.appendChild(t)}},clearSideContainers(){this.vaPopularTableBody.innerHTML="",this.vaUWTableBody.innerHTML=""},clearBottomContainer(){this.vaMainTableBody.innerHTML="",this.vaSupportTableBody.innerHTML=""},resetFixedDimensions(){this.vaTableBody.style.height="auto"},addMediaSearchEntry(e){let a=this.searchTableBody,t=document.createElement("div"),l=document.createElement("div"),i=document.createElement("p"),n=document.createElement("a");l.style.backgroundImage=`url(${e.coverImage.large})`,l.classList.add("thumbnail"),l.classList.add("clickable"),l.classList.add("action_link"),l.onclick=function(){collectMediaRoles(e)},t.appendChild(l),n.href=e.siteUrl,n.target="_blank",n.innerHTML=e.title.romaji,i.appendChild(n),t.appendChild(i),i.classList.add("thumbnail-caption"),t.appendChild(i),t.classList.add("thumbnail-wrapper"),a.appendChild(t)},setCharacterBrowseHeader(e){this.setVATableHeader(e)},styleMediaSearchTable(e){this.styleVATable(e)},styleCharacterBrowseTable(e){this.styleVATable(e)},addVALanguageEntry(e){let a=document.createElement("div"),t=document.createElement("div"),l=document.createElement("p"),i=document.createElement("a"),n=document.createElement("span"),r=document.createElement("a");t.style.backgroundImage=`url(${e.image.large})`,t.classList.add("thumbnail"),t.classList.add("clickable"),t.classList.add("internal_link"),t.onclick=function(){VADetailsOnClick(e.id)},n.innerHTML=parsedName(e.name),l.appendChild(n),l.innerHTML+="<br>",e.media&&(l.innerHTML+="<i>in</i><br>",i.innerHTML=e.media[0].title.romaji,i.href=e.media[0].siteUrl,i.target="_blank",l.appendChild(i),l.innerHTML+="<br>"),l.innerHTML+=e.language+"<br>",l.classList.add("thumbnail-caption"),r.innerHTML="See Roles",r.classList.add("clickable"),r.classList.add("action_link"),r.onclick=function(){VAOnClick(e.id)},l.appendChild(r),a.appendChild(t),a.appendChild(l),a.classList.add("thumbnail-wrapper"),this.vaLanguageTableBody.appendChild(a)},setVaLanguageTableHeader(e){if(""==e)this.vaLanguageTable.style.display="none",this.vaLanguageTableHeader.innerHTML=e;else{this.vaLanguageTable.style.display="";let a=e.trim();a=a[0].toUpperCase()+a.slice(1),this.vaLanguageTableHeader.innerHTML=a}},hideEntriesVaLanguageTable(){},showEntriesVaLanguageTable(){}};function clearTransferBox(){document.getElementById("transfer-box").value=""}function disableFollowing(){let e=window.currentDisplay.vaTable;e.style.display="",window.currentDisplay.followTable.style.display="none",document.getElementById("left-table-switch").disabled=!0}function toggleFollow(e){return following=getFollowing(),{}==following?(follow(e),getBlackStar()):e.id in following?(unfollow(e),getWhiteStar()):(follow(e),getBlackStar())}function follow(e){let a=getFollowing();a[e.id]=!0,localStorage.setItem("following",JSON.stringify(a)),addFollowTableEntry(e)}function unfollow(e){allFollowing=getFollowing(),delete allFollowing[e.id],localStorage.setItem("following",JSON.stringify(allFollowing)),removeFollowTableEntry(e.id)}function addFollowTableEntry(e){window.currentDisplay.addFollowTableEntry(e)}function removeFollowTableEntry(e){let a=window.currentDisplay.followTableBody;for(let t of a.children)if(t.id==e){a.removeChild(t),a.setAttribute("data-changed",!0);break}}function getBlackStar(){return"<i class='fas fa-star'></i>"}function getWhiteStar(){return"<i class='far fa-star'></i>"}function getDeleteIcon(){return"<i class='fas fa-times'></i>"}function importButtonOnClick(){let e=document.getElementById("transfer-box").value,a=window.currentDisplay.followTableBody,t=window.confirm("Importing will replace all existing follows. Are you sure?");t&&(isJson(e)?(localStorage.setItem("following",e),a.innerHTML="",populateFollowTable(),a.setAttribute("data-changed",!0)):window.alert("Import data invalid. No changes made to existing follows."))}function exportButtonOnClick(){let e=document.getElementById("transfer-box");e.value=JSON.stringify(getFollowing())}function isFollowed(e){try{let a=getFollowing();if(a)return!!a[e];if({}==a)return!1}catch(e){return!1}}function getFollowing(){let e=JSON.parse(localStorage.getItem("following"));return e?e:{}}function populateFollowTable(){let e=getFollowing(),a=Object.keys(e);window.currentDisplay.clearFollowTable();let t=function(e){let a=e.errors[0].status,t=document.createElement("span");window.currentDisplay.followTableBody.appendChild(t),console.log(e),window.importErrors?indow.importErrors++:window.importErrors=1};for(let e of a){makeRequest(getQuery("VA ID"),{id:e},function(e){collectFollowingCallback(a.length,e)},t)}}function collectFollowingCallback(e,a){let t=a.data.Staff,l={id:t.id,name:parsedName(t.name),url:t.siteUrl,image:t.image.large,language:t.language};addFollowTableEntry(l),window.voiceActors[t.id]==null&&(window.voiceActors[t.id]=l);let i=window.currentDisplay.followTableBody.children.length;i==e&&(window.importErrors!=null&&0!=window.importErrors&&(window.alert(`Failed to import ${window.importErrors} voice actors; no response from AniList`),window.importErrors=0),unlock())}function getDescriptionString(){return"Find out what your favorite voice actors are up to in any particular season.<br>Browse, search, and follow voice actors of any language (that AniList has), or view the details of an individual VA.<br><a href='https://themightyhotel.bitbucket.io/userscripts/integration.user.js'>Simple site integration for MAL, AniList, ANN, and AP is available</a> (requires installing via Tampermonkey).<br><br>Things not loading? Double-check that <a href='https://anilist.co/' target='_blank'>AniList</a> (the data provider) and "+"<a href='https://cdnjs.com/' target='_blank'>CDNJS</a>"+" (the icon provider) are online.<br>View the changelog and acknowledgements <a href='changelog.html'>here</a>."}function getExplainString(){return"\n  <p>\n  <b>Examples:</b><br>\n  <b>Search by anime:</b> \"Humanity has Declined\", \"Jinrui wa Suitai Shimashita\",\n  or \"\u4EBA\u985E\u306F\u8870\u9000\u3057\u307E\u3057\u305F\"<br>\n  <b>Search by character:</b> \"Phos\", \"Phos from Land of the Lustrous\"\n  (character_name from anime_name), \"Phos, \u5B9D\u77F3\u306E\u56FD\" (character_name, anime_name),\n  or variants. Languages can be mixed-and-matched.\n  </p>\n  "}function getVaFragmentationErrorString(){return"Too many requests sent to AniList, due to the voice actor's data being too fragmented (often the case with dub actors with lots of work done). As a result, character data may be noticeably incomplete and biased towards popular characters/titles."}function getVaFragmentationNoticeString(){return"<b>Warning</b>: couldn't get all characters, due to high AniList data fragmentation."}function addNoResultsIndicator(e){window.currentDisplay.addNoResultsIndicator(e)}function parsedName(e){let a=e.first,t=e.last;null==e.first&&(a=""),null==e.last&&(t="");let l=a+" "+t;return l.trim()}function parsedSeason(e,a){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()+" "+a}function parsedSeasonInt(e){let a=e.toString(),t=fourDigitYear(a.slice(0,-1)),l={1:"Winter",2:"Spring",3:"Summer",4:"Fall"}[a.slice(-1)];return parsedSeason(l,t)}function fourDigitYear(e){if(2<e.length)return e;""==e&&(e="0");let a=parseInt(e);return 50>a?(2e3+a).toString():(1900+a).toString()}function sortableSeasonId(e){let a=e.split(" ");return a.slice(-1)[0].trim()+{winter:1,spring:2,summer:3,fall:4}[a[0].trim().toLowerCase()]}function isJson(e){e="string"==typeof e?e:JSON.stringify(e);try{e=JSON.parse(e)}catch(a){return!1}return!("object"!=typeof e||null===e)}window.onload=function(){buildDisplayModes();let e=setTheme();setOnEvents();let a=tabRedirect();"main"===a?(setMainTabLoaded(!0),buildMainTab(e)):"va-details"===a?setMainTabLoaded(!1):void 0};function setOnEvents(){setOnClicks(),setOnKeyPresses(),setOnHashChange(),window.onresize=function(){window.currentDisplay.resetFixedDimensions()}}function buildMainTab(e){lock(),setDescription(),buildSeasonPickers(),buildSearchPicker(),buildLanguageFilter(),clearSearchBar(),clearTransferBox(),clearVATable(),setSeason("",""),unclick(),populateVATableWithSeason(searchFromHashIfNeeded),e&&(lock(),populateFollowTable())}function searchFromHashIfNeeded(){if(""!=window.location.hash){let e=window.location.hash.split("#").join("");e=e.replace(/_/g," ");try{e=decodeURI(e)}catch{}window.location.hash="",document.getElementById("search-bar").value=e,document.getElementById("search-button").click()}}function setOnClicks(){let e=document.getElementById("search-button"),a=document.getElementById("refresh-button"),t=document.getElementById("display-mode-switch"),l=document.getElementById("dark-mode-switch"),i=document.getElementById("left-table-switch"),n=document.getElementById("import-button"),r=document.getElementById("export-button"),s=document.getElementById("return-button"),d=document.getElementById("all-characters-switch");e.onclick=function(){searchButtonOnClick()},a.onclick=function(){refreshButtonOnClick()},t.onclick=function(){displayModeSwitchOnClick()},l.onclick=function(){darkModeSwitchOnClick()},i.onclick=function(){leftTableSwitchOnClick()},n.onclick=function(){importButtonOnClick()},r.onclick=function(){exportButtonOnClick()},s.onclick=function(){returnButtonOnClick()},d.onclick=function(){allCharactersSwitchOnClick()},setNavigationOnClicks()}function setOnKeyPresses(){let e=document.getElementById("search-bar");e.addEventListener("keyup",function(e){e.keyCode==13&&searchButtonOnClick()})}function leftTableSwitchOnClick(){let e=window.currentDisplay.vaTable,a=window.currentDisplay.followTable,t=window.currentDisplay.followTableBody,l=document.getElementById("search-bar"),i=document.getElementById("search-picker"),n=document.getElementById("search-button"),r=document.getElementById("refresh-button"),s=document.getElementById("navigation"),d=document.getElementById("transfer"),o=e.getAttribute("data-state");"none"==e.style.display?("season"==o&&(changed=t.getAttribute("data-changed"),"true"==changed&&(clearVATable(),populateVATableWithSeason(),t.setAttribute("data-changed","false"))),e.style.display="",a.style.display="none",l.disabled=!1,i.disabled=!1,n.disabled=!1,r.disabled=!1,s.style.display="",d.style.display="none"):(e.style.display="none",a.style.display="",l.disabled=!0,i.disabled=!0,n.disabled=!0,r.disabled=!0,s.style.display="none",d.style.display="")}function refreshButtonOnClick(){isLocked()||(lock(),document.getElementById("search-bar").value="",clearVATable(),clearRolesTable(),unclick(),populateVATableWithSeason())}function jumpTo(e){document.getElementById(e).scrollIntoView(!0)}function main(){let e=Object.create(Minimalist),a=Object.create(Grid);window.displayModes={minimalist:e,grid:a},window.currentDisplay=null;let t=window.location.href.split("#")[0],l=t.split("?");switch(l[1]){case"grid":case"minimalist":window.currentDisplay=window.displayModes[l[1]],saveDisplayMode(window.currentDisplay.name),window.location.replace(l[0]+window.location.hash);break;default:setDisplayMode();}window.mediaFormats=["TV","ONA","TV_SHORT"],window.voiceActors={},window.seasonalRolesCounter={},window.seasonRawData={},window.seasonRawDataIndex=0,document.baseTitle=document.title.split(" - ")[0].trim(),document.mainTitle=document.title,console.log("Katta na! GAHAHA"),console.log("---")}main();function isLocked(){return document.getElementsByTagName("body")[0].classList.contains("locked")}function lock(){document.getElementsByTagName("body")[0].classList.add("locked"),document.getElementById("lock-icon").innerHTML="\uD83D\uDD12",document.getElementById("lock-icon").style.display="",document.getElementById("va-table-tools").classList.add("disabled")}function unlock(){document.getElementsByTagName("body")[0].classList.remove("locked"),document.getElementById("lock-icon").innerHTML="",document.getElementById("lock-icon").style.display="none",document.getElementById("va-table-tools").classList.remove("disabled")}function setStorageState(){try{return localStorage.getItem("following"),!0}catch(e){return warningString="Cookies and site data permissions must be enabled for some site features to work. This includes the ability to follow voice actors.",setTimeout(function(){window.alert(warningString)},1),disableFollowing(),!1}}function getQuery(e){return"VA SEARCH"===e?`
  query ($page: Int, $perPage: Int, $search:String) {

    Page (page: $page, perPage: $perPage) {

      pageInfo {
        total
        currentPage
        lastPage
        hasNextPage
        perPage
      }

      staff (search: $search) {
        id
        name {
          first
          last
        }
        siteUrl
        language
        image {
          large
        }
        characters (perPage: 1) {
          nodes {
            id
          }
        }
      }
    }

  }
  `:"ANIME SEARCH"===e?`
  query ($page: Int, $perPage: Int, $search:String) {

    Page (page: $page, perPage: $perPage) {

      pageInfo {
        total
        currentPage
        lastPage
        hasNextPage
        perPage
      }

      media (search: $search, type: ANIME) {
        id
        title {
          romaji
          english
          native
        }
        siteUrl
        isAdult
        coverImage {
          large
        }
        characters (sort: FAVOURITES_DESC) {
          edges {
            id
            voiceActors {
              id
              name {
                first
                last
                native
              }
              language
              siteUrl
              image {
                large
              }
            }
            node {
              id
              siteUrl
              name {
                first
                last
                native
              }
              image {
                large
              }
            }
          }
        }
      }
    }

  }
  `:"ANIME SEARCH CHARACTER ID"===e?`
  query ($page: Int, $perPage: Int, $search:String) {

    Page (page: $page, perPage: $perPage) {

      media (search: $search, type: ANIME) {
        characters (sort: FAVOURITES_DESC) {
          edges {
            node {
              id
            }
          }
        }
      }
    }

  }
  `:"CHARACTER SEARCH"===e?`
  query ($page: Int, $perPage: Int, $search:String) {

    Page (page: $page, perPage: $perPage) {

      pageInfo {
        total
        currentPage
        lastPage
        hasNextPage
        perPage
      }

      characters (search: $search) {
        id
        name {
          first
          last
        }
        siteUrl
        image {
          large
        }
        media (sort: POPULARITY_DESC) {
        	edges {
            node {
              id
              title {
                romaji
                english
                native
                userPreferred
              }
              isAdult
              siteUrl
              type
              popularity
            }
            voiceActors {
              id
              name {
                first
                last
                native
              }
              image {
                large
              }
              siteUrl
              language
            }
          }
        }
      }
    }
  }
  `:"VA ID"===e?`
  query ($id: Int, $pageNum: Int) {
    Staff (id: $id) {`+`
    id
    name {
      first
      last
      native
    }
    language
    siteUrl
    image {
      large
    }
    favourites
    characters (sort: FAVOURITES_DESC, page: $pageNum) {
      pageInfo {
        hasNextPage
        currentPage
        lastPage
      }
      edges {
        role
        id
        media {
          id
          title {
            romaji
            english
            native
            userPreferred
          }
          popularity
          meanScore
          siteUrl
          seasonInt
        }
        node {
          id
          name {
            first
            last
            native
          }
          favourites
          image {
            large
          }
          siteUrl
        }
      }
    }
  `+`}
  }
  `:"CHARACTER ID"===e?`
  query ($id: Int) {
    Character (id: $id) {
      id
      name {
        first
        last
        native
      }
      image {
        large
      }
      favourites
      siteUrl
      media (sort: POPULARITY_DESC, perPage: 1) {
        edges {
          characterRole
        }
        nodes {
          id
          title {
            romaji
            english
            native
            userPreferred
          }
          popularity
          meanScore
          siteUrl
          seasonInt
        }
      }
    }
  }
  `:"\n  query ($season: MediaSeason!, $seasonYear: Int!, $page: Int, $perPage: Int, $format: MediaFormat!) {\n    Page(page: $page, perPage: $perPage) {\n      pageInfo {\n        total\n        currentPage\n        lastPage\n        hasNextPage\n        perPage\n      }\n      media(season: $season, seasonYear: $seasonYear, format: $format, type: ANIME, sort: POPULARITY_DESC) {\n        id\n        title {\n          romaji\n        }\n        coverImage {\n          medium\n        }\n        siteUrl\n        characters {\n          edges {\n            id\n            role\n            voiceActors { \n    id\n    name {\n      first\n      last\n    }\n    siteUrl\n    language\n    image {\n      large\n    }\n  }\n            node {\n              id\n              name {\n                first\n                last\n                native\n              }\n              image {\n                large\n              }\n              siteUrl\n            }\n          }\n        }\n      }\n    }\n  }\n  "}function makeRequest(e,a,t,l){let i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:e,variables:a})};l==null&&(l=handleError),fetch("https://graphql.anilist.co",i).then(handleResponse).then(function(e){t(e)}).catch(l)}function handleResponse(e){return e.json().then(function(a){return e.ok?a:Promise.reject(a)})}function handleError(e){try{let a=e.errors[0].status,t=e.errors[0].message;429==a?window.location.href="429.html#"+JSON.stringify(e):404==a?window.location.href="404.html#"+JSON.stringify(e):alert(`AniList error - status: ${a}, message: ${t}. See console for details.`)}catch(a){alert("Error. See console for more details.")}console.error(e)}function setDescription(){let e=document.getElementById("description-text");e.innerHTML=getDescriptionString()}function showMainTab(){let e=document.getElementById("main-container"),a=document.getElementById("va-info-container");e.style.display="",a.style.display="none"}function clearSearchBar(){document.getElementById("search-bar").value=""}function searchButtonOnClick(){let e,a=document.getElementById("search-bar"),t=a.value,l=document.getElementById("search-picker").value,i=!1,n={perPage:50,page:1,search:t};if(!isLocked()){if(""==t)return;switch(lock(),clearSeasonSpecificData(),clearVATable(),setVATableState("search"),document.getElementById("tool-help").innerHTML="",window.currentDisplay.setVATableHeader(" search '"+t+"'"),l){case"VA SEARCH":e=collectVASearchResultsCallback;break;case"ANIME SEARCH":e=collectAnimeSearchResultsCallback;break;case"CHARACTER SEARCH":let r=extractCharacter(t),s=extractAnime(t);n.search=r,s?(i=!0,a.setAttribute("data-async-count",0),n.search=s,makeRequest(getQuery("ANIME SEARCH CHARACTER ID"),n,collectCharacterIdsHelperCallback),e=function(e){collectCompoundSearchResultsCallback(e,n)},n.search=r):e=collectCharacterSearchResultsCallback;break;default:return void console.log("Search code unknown; aborting. (This shouldn't ever happen).");}makeRequest(getQuery(l),n,e),window.cachedQueryVariables=n}}function collectVASearchResultsCallback(e){let a=parseVASearchResults(e);fillVATableAndPage(a),unlock()}function parseVASearchResults(e){let a=e.data.Page.staff,t=[];for(let l of a)if(0!=l.characters.nodes.length){let e={id:l.id,name:parsedName(l.name),url:l.siteUrl,image:l.image.large,language:l.language};l.id in window.voiceActors||(window.voiceActors[l.id]=e),t.push(l.id)}return t}function collectAnimeSearchResultsCallback(e){let a=e.data.Page.media.filter(e=>!1==e.isAdult);fillMediaSearchTable(a),unlock()}function collectMediaRoles(e){fillCharacterBrowseTable({Media:e})}function parseCharacterBrowseData(e){let a=parsedName(e.node.name),t={character:{image:e.node.image.large,url:e.node.siteUrl,name:a}};e.voiceActors.sort(function(e,a){return e.language>a.language});return addVasToGlobalHash(e.voiceActors),{role:t,onclick:function(){unclick(),fillVALanguageTable(a,e.voiceActors)}}}function collectCharacterSearchResultsCallback(e){let a=function(e){return!e.node.isAdult},t=e.data.Page.characters.filter(e=>e.media.edges.some(a));fillCharacterSearchTable(t),unlock()}function collectCompoundSearchResultsCallback(e,a){let t=document.getElementById("search-bar"),l=parseInt(t.getAttribute("data-async-count"));if(l++,t.setAttribute("data-async-count",l),2<=l)filterCharacterSearchById(e,window.cachedCharacterIds);else return void(window.cachedResponse=e);let i=function(e){return!e.node.isAdult},n=e.data.Page.characters.filter(e=>e.media.edges.some(i));if(e.data.Page.pageInfo.hasNextPage?0!=n.length&&fillCharacterSearchTable(n,a):fillCharacterSearchTable(n,a),e.data.Page.pageInfo.hasNextPage){window.cachedQueryVariables.page=parseInt(window.cachedQueryVariables.page)+1;return void makeRequest(getQuery("CHARACTER SEARCH"),window.cachedQueryVariables,function(e){collectCompoundSearchResultsCallback(e,!0)})}unlock()}function filterCharacterSearchById(e,a){let t=e.data.Page.characters;e.data.Page.characters=t.filter(e=>a[e.id])}function collectCharacterIdsHelperCallback(e){let a=document.getElementById("search-bar"),t=a.getAttribute("data-async-count");t++,a.setAttribute("data-async-count",t);let l=e.data.Page.media;window.cachedCharacterIds={};for(let a of l)for(let e of a.characters.edges)window.cachedCharacterIds[e.node.id]=!0;2==t&&collectCompoundSearchResultsCallback(window.cachedResponse)}function parseCharacterSearchData(e){let a={},t=[],l=!1,i=parsedName(e.name),n={character:{image:e.image.large,url:e.siteUrl,name:i}},r=e.media.edges.sort(function(e,a){return a.node.popularity-e.node.popularity});for(let t of r){let e=t.node;if("ANIME"!=e.type)continue;l=!0;let i=t.voiceActors;for(let t of i){let l=t;l.media=[e],null==a[t.id]?a[t.id]=l:a[t.id].media.push(e)}}if(!l)return null;t=Object.values(a),n.character.nameEmbellish=`from ${e.media.edges[0].node.title.romaji}`;let s=t.sort(function(e,a){return e.language==a.language?e.media[0].popularity>a.media[0].popularity?-1:1:e.language<a.language?-1:1});return addVasToGlobalHash(s),{role:n,onclick:function(){unclick();fillVALanguageTable(i,s,!0)}}}function extractCharacter(e){return e.split(",")[0].split(" from ")[0].trim()}function extractAnime(e){let t=e.split(",").slice(-1)[0];return t=t.split(" from ").slice(-1)[0],e==t?null:t.trim()}function addVasToGlobalHash(e){for(let a of e){let e={id:a.id,image:a.image.large,language:a.language,name:parsedName(a.name),url:a.siteUrl};window.voiceActors[e.id]==null&&(window.voiceActors[e.id]=e)}}function buildSearchPicker(){let e=document.getElementById("search-picker"),a=["Voice actor","Anime","Character"],t=["VA SEARCH","ANIME SEARCH","CHARACTER SEARCH"];for(let l,n=0;n<a.length;n++)l=document.createElement("option"),l.value=t[n],l.innerHTML=a[n],e.appendChild(l);e.onchange=function(){document.getElementById("tool-help").innerHTML=getExplainString()}}function fillMediaSearchTable(e){let a=window.currentDisplay.searchTableBody,t=window.currentDisplay.tablePageSize;a.style.visibility="hidden";let l=0;for(let t of e){addMediaSearchEntry(t);let e=a.lastChild;e.id=l,l++}window.currentDisplay.styleMediaSearchTable(!1),switchToPage(0,"ALL"),setNavigationState(a,t,"ALL"),a.style.visibility=""}function addMediaSearchEntry(e){window.currentDisplay.addMediaSearchEntry(e)}function fillCharacterBrowseTable(e){let a=window.currentDisplay.characterBrowseTableBody,t=window.currentDisplay.tablePageSize,l=` ${e.Media.title.romaji} characters`;window.currentDisplay.setCharacterBrowseHeader(l),a.style.visibility="hidden",a.innerHTML="";for(let a of e.Media.characters.edges){let e=parseCharacterBrowseData(a);window.currentDisplay.addCharacterEntry("character-browse-table-body",e.role,e.onclick)}window.currentDisplay.styleCharacterBrowseTable(!1),switchToPage(0,"ALL"),setNavigationState(a,t,"ALL"),a.style.visibility=""}function fillCharacterSearchTable(e,a){let t=window.currentDisplay.characterBrowseTableBody,l=window.currentDisplay.tablePageSize;t.style.visibility="hidden",a||(t.innerHTML="");for(let t of e){let e=parseCharacterSearchData(t);null!=e&&window.currentDisplay.addCharacterEntry("character-browse-table-body",e.role,e.onclick)}window.currentDisplay.styleCharacterBrowseTable(!1),switchToPage(0,"ALL"),setNavigationState(t,l,"ALL"),t.style.visibility=""}function fillVALanguageTable(e,a,t){window.currentDisplay.rolesTable.style.display="none",window.currentDisplay.vaLanguageTable.style.display="";let l=window.currentDisplay.vaLanguageTableBody;window.currentDisplay.setVaLanguageTableHeader(` VAs for ${e}`),l.innerHTML="";for(let l of a)window.currentDisplay.addVALanguageEntry(l);t?window.currentDisplay.showEntriesVaLanguageTable():window.currentDisplay.hideEntriesVaLanguageTable(),0==a.length&&window.currentDisplay.addNoResultsIndicator("va-language-table-body",`<br>It's possible this character didn't have a speaking role
      in the searched season/entry. Try searching under a different season
      (e.g. "Hibike Euphonium 2" instead of "Hibike Euphonium").`)}function setOnHashChange(){window.onhashchange=function(){let e=tabRedirect();"main"!=e||mainTabLoaded()||(window.onload(),setMainTabLoaded(!0))}}function setMainTabLoaded(e){document.getElementById("main-container").setAttribute("data-loaded",e)}function mainTabLoaded(){let e=document.getElementById("main-container").getAttribute("data-loaded");return"false"!=e}function tabRedirect(){let e=window.location.hash.split("#").join(""),a="";if(isNaN(parseInt(e)))showMainTab(),document.title=document.mainTitle,a="main";else{if(isFetchingDetails()&&getFetchingDetailsId()!=e)return window.location.hash="",window.alert(`Currently busy fetching data for ${window.voiceActors[getFetchingDetailsId()].name}.
        View their details page to see progress.`),showMainTab(),"main";buildVaDetailsTab(e),a="va-details"}return a}function setTheme(){let e=document.getElementsByTagName("body")[0],a="light",t=setStorageState();if(t){let t=setThemeFromStorage();t||e.classList.add(a)}else e.classList.add(a);return t}function darkModeSwitchOnClick(){let e=document.getElementsByTagName("body")[0],a=document.getElementById("dark-mode-switch");e.classList.contains("dark")?(e.classList.remove("dark"),a.value="Dark Theme",saveTheme("light")):(e.classList.add("dark"),a.value="Light Theme",saveTheme("dark"))}function fetchTheme(){let e=localStorage.getItem("theme");return e}function saveTheme(e){localStorage.setItem("theme",e)}function setThemeFromStorage(){let e=document.getElementsByTagName("body")[0],a=fetchTheme(),t=!1;switch(a&&(e.classList.add(a),t=!0),a){case"light":document.getElementById("dark-mode-switch").value="Dark Theme";break;case"dark":document.getElementById("dark-mode-switch").value="Light Theme";break;default:}return t}function VADetailsOnClick(e){window.location.hash=e}function returnButtonOnClick(){window.location.hash=""}function allCharactersSwitchOnClick(){let e=document.getElementById("va-side-containers"),a=document.getElementById("va-bottom-container");"none"==a.style.display?(a.style.display="",e.style.display="none"):(e.style.display="",a.style.display="none")}function portraitThumbnailOnClick(e){let a=e.parentNode.children[1].children[0];a.lastChild.click()}function characterThumbnailOnClick(e){e.nextSibling.firstChild.click()}function isFetchingDetails(){let e=document.getElementById("va-info-container").getAttribute("data-fetching");return null!=e&&0!=e}function setFetchingDetails(e){document.getElementById("va-info-container").setAttribute("data-fetching",e),document.getElementById("fetch-icon").innerHTML="\u30A2",document.getElementById("fetch-icon").style.display=""}function unsetFetchingDetails(){document.getElementById("va-info-container").setAttribute("data-fetching",0),document.getElementById("fetch-icon").innerHTML="",document.getElementById("fetch-icon").style.display="none"}function getFetchingDetailsId(){let e=document.getElementById("va-info-container").getAttribute("data-fetching");return null==e?0:e}function collectVADetails(e){let a=e.data.Staff,t={roles:[],id:a.id,name:parsedName(a.name),language:a.language,url:a.siteUrl,image:a.image.large,popularity:a.favourites,numCorruptRoles:0,numOrphanRoles:0,toFixCount:0};window.voiceActors[t.id]=t,extractVARoles(e)}function extractVARoles(e){let a=e.data.Staff,t=a.characters.edges,l=window.voiceActors[a.id];for(let a of t){let t=getMainShowofCharacter(a);if(null==t){let t={id:a.node.id};makeRequest(getQuery("CHARACTER ID"),t,function(a){addAniListCorruptRoles(e,a)}),l.toFixCount++,l.numCorruptRoles++}else{let e={id:a.node.id,favourites:a.node.favourites,name:parsedName(a.node.name),url:a.node.siteUrl,image:a.node.image.large,characterRole:a.role};l.roles.push({show:t,character:e})}}0==l.toFixCount?decideNextStep(e):console.log(`${l.name} - corrupt roles to fix: ${l.toFixCount}`)}function getMainShowofCharacter(e){let a=0,t=e.media[0];for(let l of e.media)l.popularity>a&&(a=l.popularity,t=l);return t}function addAniListCorruptRoles(e,a){let t,l,i,n=e.data.Staff.id,r=a.data.Character;try{t={characterRole:r.media.edges[0].characterRole,id:r.id,favourites:r.favourites,name:parsedName(r.name),url:r.siteUrl,image:r.image.large},l=r.media.nodes[0],i={show:l,character:t},window.voiceActors[n].roles.push(i)}catch(e){console.log("Character data for "+r.id+"/"+parsedName(r.name)+" unrecoverable."),window.voiceActors[n].numOrphanRoles+=1}window.voiceActors[n].toFixCount--,0==window.voiceActors[n].toFixCount&&decideNextStep(e)}function requestNextVaPage(e){let a=e.data.Staff,t=a.characters.pageInfo.currentPage+1,l=a.characters.pageInfo.lastPage,i={id:a.id,pageNum:t};makeRequest(getQuery("VA ID"),i,extractVARoles),displayPageProgress(t,l)}function decideNextStep(e){if(1==e.data.Staff.characters.pageInfo.currentPage)if(0!=e.data.Staff.characters.edges.length)fillVaBasicInfo(window.voiceActors[e.data.Staff.id]);else return unsetFetchingDetails(),void addNotVaIndicator();e.data.Staff.characters.pageInfo.hasNextPage?requestNextVaPage(e):(fillVaAdvancedInfo(window.voiceActors[e.data.Staff.id]),unsetFetchingDetails())}function calculateStatistics(e){let a=window.voiceActors[e];a.rolesCount=a.roles.length,a.roleMostPopularShow=getRoleByHighestShowMetric("popularity",a.roles),a.roleHighestRatedShow=getRoleByHighestShowMetric("meanScore",a.roles),a.avgCharacterPopularity=getAvgCharacterPopularity(a),a.characterSpread=getCharacterSignificanceSpread(a.roles)}function getRoleByHighestShowMetric(e,a){let t=0,l=a[0];for(let i of a)i.show[e]>t&&(t=i.show[e],l=i);return l}function getAvgCharacterPopularity(e){null==e.characterSpread&&(e.characterSpread=getCharacterSignificanceSpread(e.roles));let a=0,t=0;for(let l of e.roles)"MAIN"==l.character.characterRole&&(t+=l.character.favourites),a+=l.character.favourites;return t=0==t?0:Math.round(t/e.characterSpread.MAIN),a=0==a?0:Math.round(a/e.rolesCount),{main:t,total:a}}function getCharacterSignificanceSpread(e){let a=0,t=0;for(let l of e)"MAIN"==l.character.characterRole?a+=1:t+=1;return{MAIN:a,SUPPORTING:t}}function addPopularCharacters(e,a){let t=e.roles.slice();sortRolesByFavourites(t),e.popularRoles=[];let l=0;for(role of t)if(30<=role.character.favourites&&(e.popularRoles.push(role),l++),l==a)break}function addUwCharacters(e,a){let t=e.roles.slice();sortRolesByShowPopularity(t),t.reverse(),t=t.filter(function(a){return!e.popularRoles.includes(a)&&!(3e4<=a.show.popularity)&&(!("MAIN"!=a.character.characterRole)||!(10>=a.character.favourites))});let l,i=[80,77,75,72,70],n=0;for(;n!=i.length&&(l=t.filter(e=>e.show.meanScore>=i[n]),!(l.length>=a));)n++;e.uwRoles=l.slice(0,a),sortRolesByShowRating(e.uwRoles)}function sortRolesByFavourites(e){e.sort(function(e,a){return a.character.favourites-e.character.favourites})}function sortRolesByShowPopularity(e){e.sort(function(e,a){return a.show.popularity-e.show.popularity})}function sortRolesByShowRating(e){e.sort(function(e,a){return a.show.meanScore-e.show.meanScore})}function buildVaDetailsTab(e){let a=document.getElementById("main-container"),t=document.getElementById("va-info-container"),l=document.getElementById("va-left-container"),i=document.getElementById("va-right-container"),n=document.getElementById("all-characters-switch"),r=document.getElementById("display-mode-switch"),s=window.voiceActors[e];if(isFetchingDetails()){let l=getFetchingDetailsId();l==e&&(a.style.display="none",t.style.display="")}else setFetchingDetails(e),a.style.display="none",t.style.display="",n.classList.add("disabled"),clearVaInfo(),s&&s.roles&&0!=s.roles.length?(fillVaBasicInfo(window.voiceActors[e]),fillVaAdvancedInfo(window.voiceActors[e]),unsetFetchingDetails()):(document.getElementById("va-info-bio-text").innerHTML="Getting initial data...",makeRequest(getQuery("VA ID"),{id:e,pageNum:1},collectVADetails))}function fillVaBasicInfo(e){let a=document.getElementById("va-info-name"),t=document.getElementById("va-info-bio-portrait"),l=document.getElementById("va-info-bio-text"),i=document.createElement("h4"),n=document.getElementById("va-left-container"),r=document.getElementById("va-side-containers");i.innerHTML=e.name,a.appendChild(i),document.title=e.name+" - "+document.baseTitle,t.style.backgroundImage=`url(${e.image})`,t.classList.add("thumbnail");if(addPopularCharacters(e,6),0!=e.popularRoles.length){for(let a of e.popularRoles)addCharacterEntry("va-popular-characters",a);n.style.display=""}r.style.display=""}function displayPageProgress(e,a){document.getElementById("va-info-bio-text").innerHTML=`Getting data: page ${e} of ${a}`}function addNotVaIndicator(){document.getElementById("va-info-bio-text").innerHTML="Selected person has no known voice acting roles."}function fillVaAdvancedInfo(e){let a=document.getElementById("va-info-bio-portrait"),t=document.getElementById("va-info-bio-text"),l=document.createElement("a"),i=document.getElementById("va-left-container"),n=document.getElementById("va-right-container"),r=document.getElementById("va-bottom-container"),s=document.getElementById("display-mode-switch");30<e.numCorruptRoles?(window.alert(getVaFragmentationErrorString()),t.innerHTML=getVaFragmentationNoticeString()+"<br>"):t.innerHTML="",sortRolesByFavourites(e.roles),calculateStatistics(e.id),t.innerHTML+=formatStats(e),l.href=e.url,l.target="_blank",l.innerHTML="View on AniList",t.appendChild(l);if(addUwCharacters(e,6),0!=e.uwRoles.length)for(let a of e.uwRoles)addCharacterEntry("va-uw-characters",a);for(role of e.roles)"MAIN"==role.character.characterRole?addCharacterEntry("va-main-characters",role):addCharacterEntry("va-support-characters",role);resizeCharacterContainers(e),setSortOnClicks()}function resizeCharacterContainers(e){let a=document.getElementById("va-left-container"),t=document.getElementById("va-right-container"),l=document.getElementById("va-bottom-container"),i=document.getElementById("all-characters-switch");0==e.uwRoles.length&&0==e.popularRoles.length?(a.style.display="none",t.style.display="none",l.style.display=""):0==e.uwRoles.length&&0!=e.popularRoles.length?(t.style.display="none",changeSideContainerWidths("natural"),i.classList.remove("disabled")):0==e.popularRoles.length&&0!=e.uwRoles.length?(a.style.display="none",t.style.display="",changeSideContainerWidths("natural"),i.classList.remove("disabled")):(t.style.display="",i.classList.remove("disabled"))}function changeSideContainerWidths(e){let a=document.getElementById("va-left-container"),t=document.getElementById("va-right-container");switch(e){case"natural":a.classList.remove("one-half"),a.classList.remove("column"),t.classList.remove("one-half"),t.classList.remove("column");break;case"half":a.classList.add("one-half"),a.classList.add("column"),t.classList.add("one-half"),t.classList.add("column");break;default:}}function formatStats(e){let a=e.roleMostPopularShow,t=e.roleHighestRatedShow,l=`
  Popularity: ${e.popularity} favorites<br>
  Number of characters voiced: ${e.rolesCount}<br>

  Most popular title: <a href="${a.show.siteUrl}" target="_blank">
  ${a.show.title.romaji}</a>
    (voiced <a href="${a.character.url}" target="_blank">
    ${a.character.name}</a>)<br>

  Highest rated title: <a href="${t.show.siteUrl}" target="_blank">
  ${t.show.title.romaji}</a>
      (voiced <a href="${t.character.url}" target="_blank">
      ${t.character.name}</a>)<br>

  Mean character popularity:
    ${e.avgCharacterPopularity.main} favorites for main characters,
    ${e.avgCharacterPopularity.total} favorites for all characters<br>
  Character spread:
    ${e.characterSpread.MAIN} main,
    ${e.characterSpread.SUPPORTING} supporting
    <br>
  `;return l}function addCharacterEntry(e,a){window.currentDisplay.addCharacterEntry(e,a,null,!0)}function addCharacterTableEntry(e,a){let t=a.character,l=a.show,i=document.getElementById(e),n=document.createElement("tr"),r=document.createElement("td"),s=document.createElement("img"),d=document.createElement("td"),o=document.createElement("a"),c=document.createElement("a");s.src=t.image,s.alt=t.name,r.appendChild(s),n.appendChild(r),o.href=t.url,o.target="_blank",o.innerHTML=t.name,c.href=l.siteUrl,c.target="_blank",c.innerHTML=l.title.romaji,d.appendChild(o),d.innerHTML+="<br>",d.appendChild(c),n.appendChild(d),i.appendChild(n)}function clearVaInfo(){document.getElementById("va-info-name").innerHTML="",document.getElementById("va-info-bio-portrait").style.backgroundImage="",document.getElementById("va-info-bio-portrait").classList.remove("thumbnail"),document.getElementById("va-info-bio-text").innerHTML="",document.getElementById("va-left-container").style.display="none",document.getElementById("va-right-container").style.display="none",document.getElementById("va-bottom-container").style.display="none",window.currentDisplay.clearSideContainers(),window.currentDisplay.clearBottomContainer(),changeSideContainerWidths("half"),changeSideContainerWidths("half")}function setSortOnClicks(){window.currentDisplay.setSortOnClicks()}function fillVATableAndPage(e){let a=window.currentDisplay.vaTableBody,t=window.currentDisplay.tablePageSize;a.style.visibility="hidden";let l=0;for(let t of e){let e=window.voiceActors[t];addVATableEntry(e),updateLanguageFilter(e.language);let i=a.lastChild;i.id=l,l++}styleVATable(),setNavigationState(a,t,"ALL"),switchToPage(0,"ALL"),a.style.visibility=""}function addVATableEntry(e){window.currentDisplay.addVATableEntry(e)}function switchToPage(e,a){let t=window.currentDisplay.vaTableBody,l=document.getElementById("page-tracker"),n=t.getAttribute("data-pageSize"),r=t.getAttribute("data-pageCount");if(t.style.display="none","ALL"!=a){let l=0,i=0;for(let r of t.children){if(r.classList.contains(a)){if(n*e<=l&&l<n*(e+1))try{t.children[i].style.display=""}catch(a){console.log("Pg."+e+", e."+i+" doesn't exist. Probably expected behaviour.")}else r.style.display="none";l++}else r.style.display="none";i++}}else{for(let e of t.children)e.style.display="none";for(let a=n*e;a<n*(e+1);a++)try{t.children[a].style.display=""}catch(e){}}t.style.display="",l.innerHTML=(e+1).toString()+"/"+r.toString()}function styleVATable(e){window.currentDisplay.styleVATable(e)}function setNavigationState(e,a,t){let l;l="ALL"==t?Math.ceil(e.childElementCount/a):Math.ceil(e.querySelectorAll("."+t).length/a),0==l&&l++,e.style.display="",e.setAttribute("data-pageIndex",0),e.setAttribute("data-pageSize",a),e.setAttribute("data-pageCount",l),1==l?document.getElementById("right-nav").classList.add("inactive"):document.getElementById("right-nav").classList.remove("inactive"),document.getElementById("page-tracker").innerHTML="1/"+l.toString()}function setVATableState(e){window.currentDisplay.vaTable.setAttribute("data-state",e)}function clearVATable(){let e=window.currentDisplay.vaTableBody;e.innerHTML="",e.setAttribute("data-pageIndex",0),e.setAttribute("data-pageCount",1),document.getElementById("left-nav").classList.add("inactive"),document.getElementById("right-nav").classList.add("inactive"),document.getElementById("language-filter").innerHTML="",updateLanguageFilter("ALL"),window.currentDisplay.setVATableHeader("")}function resetVaTablePages(e){window.currentDisplay.vaTable.setAttribute("data-pageIndex",0),document.getElementById("left-nav").classList.add("inactive"),document.getElementById("right-nav").classList.remove("inactive"),switchToPage(0,e)}function buildSeasonPickers(){buildYearPicker(),buildQuarterPicker()}function buildYearPicker(){let e=document.getElementById("year-picker");for(let a,t=1950;2020>=t;t++)a=document.createElement("option"),a.value=t,a.innerHTML=t,e.appendChild(a);e.onchange=function(){onSeasonChange()}}function buildQuarterPicker(){let e=document.getElementById("quarter-picker"),a=["WINTER","SPRING","SUMMER","FALL"];for(let t of a){let a=document.createElement("option");a.value=t,a.innerHTML=t,e.appendChild(a)}e.onchange=function(){onSeasonChange()}}function setSeason(e,a){if(!e||!a){let t=Math.floor(new Date().getMonth()/3);e=new Date().getFullYear(),a={0:"WINTER",1:"SPRING",2:"SUMMER",3:"FALL"}[t]}document.getElementById("year-picker").value=e,document.getElementById("quarter-picker").value=a}function buildLanguageFilter(){updateLanguageFilter("ALL"),document.getElementById("language-filter").onchange=function(){onLanguageChange()}}function updateLanguageFilter(e){let a=document.getElementById("language-filter");for(let t of a.children)if(t.value==e)return;let t=document.createElement("option");t.value=e,t.innerHTML=e,a.appendChild(t)}function collectSeasonalVAsCallback(e,a,t,l){let i=window.currentDisplay.vaTableBody,n=i.getAttribute("data-async-count");cacheSeasonRawData(e,a,t),extractVAs(window.seasonalRolesCounter,window.voiceActors,t),n?(n=parseInt(n),n++,i.setAttribute("data-async-count",n),n==window.mediaFormats.length&&(sortedSeasonalVoiceActorIds=sortVaIdsByNumRoles(window.seasonalRolesCounter,window.voiceActors),fillVATableAndPage(sortedSeasonalVoiceActorIds),i.setAttribute("data-async-count",0),unlock(),l())):i.setAttribute("data-async-count",1)}function cacheSeasonRawData(e,a,t){for(let l=!1;!l;)window.seasonRawData[e]?window.seasonRawData[e][a]?l=!0:window.seasonRawData[e][a]={}:window.seasonRawData[e]={};window.seasonRawData[e][a][window.seasonRawDataIndex]=t,window.seasonRawDataIndex++,window.seasonRawDataIndex==window.mediaFormats.length&&(window.seasonRawDataIndex=0)}function extractVAs(e,a,t){let l=t.data.Page.media;for(let i of getAllShowCharacterDatas(l))for(let t of getVoiceActors(i))t.id in e?e[t.id]+=1:e[t.id]=1,t.id in a||(a[t.id]=t)}function getVoiceActors(e){let a=new Set;for(let t of e.voiceActors)a.add({name:parsedName(t.name),id:t.id,url:t.siteUrl,image:t.image.large,language:t.language});return a}function getAllShowCharacterDatas(e){let a=[];for(let t of e){let e=t.characters.edges;a=a.concat(e)}return a}function sortVaIdsByNumRoles(e){let a=[],t=[];for(let t of Object.keys(e))a.push({id:t,numRoles:e[t]});a.sort(function(e,a){return a.numRoles-e.numRoles});for(let l of a)t.push(l.id);return t}function setNavigationOnClicks(){let e=document.getElementById("left-nav"),a=document.getElementById("right-nav");e.onclick=function(){leftNavOnClick()},a.onclick=function(){rightNavOnClick()}}function leftNavOnClick(){let e=document.getElementById("left-nav"),a=document.getElementById("right-nav"),t=window.currentDisplay.vaTableBody.getAttribute("data-pageIndex"),l=document.getElementById("language-filter"),i=l.options[l.selectedIndex].value,n=window.scrollX,r=window.scrollY,s=window.currentDisplay.vaTable.clientHeight,d=0;t=parseInt(t),t--,switchToPage(t,i),window.currentDisplay.vaTableBody.setAttribute("data-pageIndex",t),0==t&&e.classList.add("inactive"),a.classList.remove("inactive"),d=window.currentDisplay.vaTable.clientHeight-s,window.scroll(n,r+d)}function rightNavOnClick(){let e=document.getElementById("right-nav"),a=document.getElementById("left-nav"),t=window.currentDisplay.vaTableBody,l=document.getElementById("language-filter"),i=l.options[l.selectedIndex].value,n=window.scrollX,r=window.scrollY,s=window.currentDisplay.vaTable.clientHeight,d=0,o=t.getAttribute("data-pageIndex"),c=t.getAttribute("data-pageCount");o=parseInt(o),c=parseInt(c)-1,o++,switchToPage(o,i),window.currentDisplay.vaTableBody.setAttribute("data-pageIndex",o),o==c&&e.classList.add("inactive"),a.classList.remove("inactive"),d=window.currentDisplay.vaTable.clientHeight-s,window.scroll(n,r+d)}function onSeasonChange(){window.clicked&&VAOnClick(window.clicked)}function onLanguageChange(){let e=window.currentDisplay.vaTableBody,a=document.getElementById("language-filter"),t=a.options[a.selectedIndex].value;resetVaTablePages(t),setNavigationState(e,e.getAttribute("data-pageSize"),t)}function populateVATableWithSeason(e){let a=document.getElementById("quarter-picker"),t=window.currentDisplay.vaTable,l=a.options[a.selectedIndex].value.toUpperCase(),n=document.getElementById("year-picker").value,r={perPage:50,page:1,season:l,seasonYear:n};if(clearSeasonSpecificData(),t.setAttribute("data-state","season"),window.currentDisplay.setVATableHeader(" VAs for "+parsedSeason(l,n)),window.seasonRawData[n]&&window.seasonRawData[n][l]){for(let e,a=0;a<window.mediaFormats.length;a++)e=window.seasonRawData[n][l][a],extractVAs(window.seasonalRolesCounter,window.voiceActors,e);populateVATableWithSeasonCache(),unlock(),e()}else for(let a of window.mediaFormats)r.format=a,makeRequest(getQuery(""),r,function(a){collectSeasonalVAsCallback(n,l,a,e)})}function populateVATableWithSeasonCache(){sortedSeasonalVoiceActorIds=sortVaIdsByNumRoles(window.seasonalRolesCounter,window.voiceActors),fillVATableAndPage(sortedSeasonalVoiceActorIds)}function clearSeasonSpecificData(){window.seasonalRolesCounter={}}function VAOnClick(e){let a=window.currentDisplay.rolesTableBody,t=document.getElementById("quarter-picker"),l=t.options[t.selectedIndex].value.toUpperCase(),n=document.getElementById("year-picker").value,r={perPage:50,page:1,season:l,seasonYear:n};if(!isLocked())if(lock(),clearRolesTable(),unclick(),click(e),window.seasonRawData[n]&&window.seasonRawData[n][l]){for(let a=0;a<window.mediaFormats.length;a++)collectSeasonalRoles(e,window.seasonRawData[n][l][a]);""==a.innerHTML&&addNoResultsIndicator("roles-table-body"),unlock()}else for(let a of window.mediaFormats)r.format=a,makeRequest(getQuery(""),r,function(a){collectSeasonalRolesCallback(e,n,l,a)})}function unclick(){window.currentDisplay.setRolesTableHeader(""),window.clicked=""}function click(e){let a=window.voiceActors[e].name,t=document.getElementById("quarter-picker").value,l=document.getElementById("year-picker").value;window.currentDisplay.setRolesTableHeader(" "+a+" for "+parsedSeason(t,l)),window.clicked=e}function collectSeasonalRolesCallback(e,a,t,l){collectSeasonalRoles(e,l),cacheSeasonRawData(a,t,l);let i=window.currentDisplay.rolesTableBody,n=i.getAttribute("data-async-count");n?(n=parseInt(n),i.setAttribute("data-async-count",n+1),n+1==window.mediaFormats.length&&(i.setAttribute("data-async-count",0),""==i.innerHTML&&addNoResultsIndicator("roles-table-body"),unlock())):i.setAttribute("data-async-count",1)}function collectSeasonalRoles(e,a){let t=a.data.Page.media;for(let l of t){let a=l.characters.edges;for(let t of a)if(hasVoiceActor(t,e)){let e={showID:l.id,showName:l.title.romaji,showImage:l.coverImage,showUrl:l.siteUrl,characterID:t.node.id,characterName:parsedName(t.node.name),characterImage:t.node.image,characterUrl:t.node.siteUrl};addRolesTableEntry(e)}}}function hasVoiceActor(e,a){for(let t of getVoiceActors(e))if(t.id==a)return!0;return!1}function addRolesTableEntry(e){window.currentDisplay.addRolesTableEntry(e)}function clearRolesTable(){let e=window.currentDisplay.rolesTableBody;e.innerHTML="",e.setAttribute("data-async-count",0),window.currentDisplay.rolesTable.style.display="",window.currentDisplay.vaLanguageTable.style.display="none"}