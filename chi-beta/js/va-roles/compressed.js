function collectSeasonalRolesCallback(a,b,c,d){collectSeasonalRoles(a,d),cacheSeasonRawData(b,c,d);let e=window.currentDisplay.rolesTableBody,f=e.getAttribute("data-async-count");f?(f=parseInt(f),e.setAttribute("data-async-count",f+1),f+1==window.mediaFormats.length&&(e.setAttribute("data-async-count",0),""==e.innerHTML&&addNoResultsIndicator("roles-table-body"),unlock())):e.setAttribute("data-async-count",1)}function collectSeasonalRoles(a,b){let c=b.data.Page.media;for(let d of c){let b=d.characters.edges;for(let c of b)if(hasVoiceActor(c,a)){let a={showID:d.id,showName:d.title.romaji,showImage:d.coverImage,showUrl:d.siteUrl,characterID:c.node.id,characterName:parsedName(c.node.name),characterImage:c.node.image,characterUrl:c.node.siteUrl};addRolesTableEntry(a)}}}function hasVoiceActor(a,b){for(let c of getVoiceActors(a))if(c.id==b)return!0;return!1}function addRolesTableEntry(a){window.currentDisplay.addRolesTableEntry(a)}function clearRolesTable(){let a=window.currentDisplay.rolesTableBody;a.innerHTML="",a.setAttribute("data-async-count",0),window.currentDisplay.rolesTable.style.display="",window.currentDisplay.vaLanguageTable.style.display="none"}function VAOnClick(a){let b=window.currentDisplay.rolesTableBody,c=document.getElementById("quarter-picker"),d=c.options[c.selectedIndex].value.toUpperCase(),e=document.getElementById("year-picker").value,f={perPage:50,page:1,season:d,seasonYear:e};if(!isLocked())if(lock(),clearRolesTable(),unclick(),click(a),window.seasonRawData[e]&&window.seasonRawData[e][d]){for(let b=0;b<window.mediaFormats.length;b++)collectSeasonalRoles(a,window.seasonRawData[e][d][b]);""==b.innerHTML&&addNoResultsIndicator("roles-table-body"),unlock()}else for(let b of window.mediaFormats)f.format=b,makeRequest(getQuery(""),f,function(b){collectSeasonalRolesCallback(a,e,d,b)})}function unclick(){window.currentDisplay.setRolesTableHeader(""),window.clicked=""}function click(a){let b=window.voiceActors[a].name,c=document.getElementById("quarter-picker").value,d=document.getElementById("year-picker").value;window.currentDisplay.setRolesTableHeader(" "+b+" for "+parsedSeason(c,d)),window.clicked=a}